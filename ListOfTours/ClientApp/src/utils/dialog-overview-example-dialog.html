<h1 mat-dialog-title> {{title}}</h1>
<hr />

<div *ngIf=!_dataLoaded style="position: absolute; top: 50%; left: 50%; margin-top: -50px; margin-left: -50px; width: 100px; height: 100px;">
  <mat-spinner color="accent"></mat-spinner>
</div>

<div *ngIf=_dataLoaded>
  <form [formGroup]="_myForm" novalidate (ngSubmit)="submit()" style="max-width: 400px; margin: auto; width: 50%;">
    <div class="form-group">

      <mat-form-field style="width: 250px;">
        <input matInput
               formControlName="clientName"
               placeholder="Client">
        <mat-error *ngIf="_myForm.controls['clientName'].invalid">Your Client name is not correct</mat-error>
      </mat-form-field>
      <br />

      <!-- Tour name -->
      <mat-form-field style="width: 250px;">
        <input type="text"
               placeholder="Tour"
               matInput
               (input)="onTourInputChange()"
               formControlName="toursAutocomplete"
               [matAutocomplete]="auto">
        <mat-error *ngIf="_myForm.controls['toursAutocomplete'].invalid">Your Tour name is not correct</mat-error>

        <mat-autocomplete #auto="matAutocomplete">
          <mat-option *ngFor="let tour of _tours" [value]="tour.name">
            <div (click)="onTourClick(tour)">{{tour.name}}</div>
          </mat-option>
        </mat-autocomplete>
      </mat-form-field>

      <!-- Excursion -->
      <smooth-dnd-container (drop)="onDrop($event)">
        <smooth-dnd-draggable *ngFor="let excursion of _excursionSights; let i = index">
          <div class="draggable-item" (click)="onExcursionClick(excursion)">
            {{ i + 1 }}. {{ excursion.name | slice:0:21}}
          </div>
        </smooth-dnd-draggable>
      </smooth-dnd-container>

      <!--<smooth-dnd-container (drop)="onDrop($event)">
        <smooth-dnd-draggable *ngFor="let excursion of _excursionSights; let i = index">
          <div class="draggable-item" (click)="onExcursionClick(excursion)">
            {{ i + 1 }}. {{ excursion.name | slice:0:21}}
          </div>
        </smooth-dnd-draggable>
      </smooth-dnd-container>-->

      <br />
      <!-- DateTime -->
      <mat-form-field style="width: 250px;">
        <input matInput
               formControlName="datePicker"
               [matDatepicker]="picker"
               placeholder="Choose a date"
               [(ngModel)]="_date">

        <mat-error *ngIf="_myForm.controls['datePicker'].invalid">Your Date time is not correct</mat-error>
        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
      </mat-form-field>

    </div>
  </form>

  <div mat-dialog-actions>
    <button style="margin-right: 15px;" mat-flat-button color="white" (click)="onCancelClick()">Cancel</button>
    <button style="margin-right: 15px;" color="accent" mat-flat-button [mat-dialog-close]="data" cdkFocusInitial>Save</button>
  </div>
</div>




  <!--<div mat-dialog-content>

    <p>Excursion:</p>
    <mat-form-field>
      <input matInput [(ngModel)]="data.tour.name">
    </mat-form-field>
    <p>Client:</p>
    <mat-form-field>
      <input matInput [(ngModel)]="data.tour.clientName">
    </mat-form-field>
    <p>Date:</p>

    <mat-form-field>
      <input matInput
             [matDatepicker]="picker"
             placeholder="Choose a date"
             [(ngModel)]="data.tour.date">
      <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
      <mat-datepicker #picker></mat-datepicker>
    </mat-form-field>

  </div>-->
  <!--<form class="example-form">
    <mat-form-field class="example-full-width">
      <input type="text" placeholder="Pick one" aria-label="Number" matInput [formControl]="myControl" [matAutocomplete]="auto">
      <mat-autocomplete #auto="matAutocomplete">
        <mat-option *ngFor="let option of options" [value]="option">
          {{option}}
        </mat-option>
      </mat-autocomplete>
    </mat-form-field>
  </form>-->
  <!--<smooth-dnd-container (drop)="onDrop($event)">
    <smooth-dnd-draggable *ngFor="let excursion of data.tour.excursionSights">
      <div class="draggable-item">
        {{ excursion.name }}
      </div>
    </smooth-dnd-draggable>
  </smooth-dnd-container>-->


